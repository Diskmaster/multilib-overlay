--- /usr/portage/net-libs/xulrunner/xulrunner-1.9.2.8.ebuild	2010-07-24 06:48:27.000000000 -0500
+++ ./net-libs/xulrunner/xulrunner-1.9.2.8.ebuild	2010-07-25 02:07:39.502939396 -0500
@@ -221,7 +221,7 @@
 
 	# env.d file for ld search path
 	dodir /etc/env.d
-	echo "LDPATH=${EPREFIX}/${MOZLIBDIR}" > "${ED}"/etc/env.d/08xulrunner || die "env.d failed"
+	echo "LDPATH=${EPREFIX}/${MOZLIBDIR}" > "${ED}"/etc/env.d/08xulrunner-${CHOST} || die "env.d failed"
 
 	# Add our defaults to xulrunner and out of firefox
 	cp "${FILESDIR}"/xulrunner-default-prefs.js \
@@ -237,6 +237,7 @@
 }
 
 pkg_postinst() {
+	if is_final_abi ; then
 	ewarn "If firefox fails to start with \"failed to load xpcom\", run revdep-rebuild"
 	ewarn "If that does not fix the problem, rebuild dev-libs/nss"
 	ewarn "Try dev-util/lafilefixer if you get build failures related to .la files"
@@ -250,4 +251,5 @@
 	ewarn "Any package that requires xulrunner:1.9 slot could and most likely will"
 	ewarn "have issues. These issues should be reported to maintainer, and mozilla herd"
 	ewarn "should be cc'd on the bug report. Thank you anarchy@gentoo.org ."
+	fi
 }
