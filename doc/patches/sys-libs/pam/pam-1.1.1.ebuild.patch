--- /usr/portage/sys-libs/pam/pam-1.1.1.ebuild	2010-01-06 17:06:49.000000000 +0100
+++ ./sys-libs/pam/pam-1.1.1.ebuild	2010-03-14 15:28:24.000000000 +0100
@@ -75,10 +75,7 @@
 	check_old_modules
 }
 
-src_unpack() {
-	unpack ${A}
-	cd "${S}"
-
+src_prepare() {
 	# Avoid building xtests during "make all"; note that for what
 	# we're concerned xtests are not even executed, so we should
 	# probably use EXTRA_PROGRAMS.
@@ -96,7 +93,7 @@
 	elibtoolize
 }
 
-src_compile() {
+src_configure() {
 	local myconf
 
 	if use hppa || use elibc_FreeBSD; then
@@ -118,6 +115,9 @@
 		--disable-dependency-tracking \
 		--disable-prelude \
 		${myconf} || die "econf failed"
+}
+
+src_compile() {
 	emake sepermitlockdir="/var/run/sepermit" || die "emake failed"
 }
 
