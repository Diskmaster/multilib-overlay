@@ -18,9 +18,7 @@
 DEPEND="${RDEPEND}
 	sys-kernel/linux-headers"
 
-src_unpack() {
-	unpack ${P}.tar.bz2
-	cd "${S}"
+src_prepare() {
 	epatch "${FILESDIR}"/2.16/*.patch
 	sed -i -e '/cap_setfcap.*morgan/s:^:#:' pam_cap/capability.conf
 	sed -i \
 }
 
 src_compile() {
-	tc-export BUILD_CC CC AR RANLIB
-	emake || die
+	[[ -z ${EMULTILIB_PKG} ]] && tc-export BUILD_CC CC AR RANLIB
+	emake lib=$(get_libdir) || die
 }
 
