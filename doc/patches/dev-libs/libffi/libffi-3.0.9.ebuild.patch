--- /auto/portage/dev-libs/libffi/libffi-3.0.9.ebuild	2010-09-20 14:35:49.000000000 -0400
+++ ./dev-libs/libffi/libffi-3.0.9.ebuild	2010-11-23 09:45:52.963147376 -0500
@@ -16,10 +16,7 @@
 RDEPEND=""
 DEPEND="test? ( dev-util/dejagnu )"
 
-src_unpack() {
-	unpack ${A}
-	cd "${S}"
-
+src_prepare() {
 	epatch "${FILESDIR}"/${P}-interix.patch \
 		"${FILESDIR}"/${P}-irix.patch \
 		"${FILESDIR}"/${P}-arm-oabi.patch
@@ -27,12 +24,11 @@
 	elibtoolize
 }
 
-src_compile() {
+src_configure() {
 	econf \
 		--disable-dependency-tracking \
 		$(use_enable static-libs static) \
 		$(use_enable debug)
-	emake || die
 }
 
 src_install() {
