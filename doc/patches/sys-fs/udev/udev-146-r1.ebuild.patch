--- /auto/portage/sys-fs/udev/udev-146-r1.ebuild	2010-03-15 18:09:28.000000000 -0400
+++ ./sys-fs/udev/udev-146-r1.ebuild	2010-11-02 00:06:34.331756449 -0400
@@ -125,15 +125,7 @@
 	sed -e "s#/lib/udev#${udev_libexec_dir}#" -i "$@"
 }
 
-src_unpack() {
-	if [[ ${PV} == "9999" ]] ; then
-		git_src_unpack
-	else
-		unpack ${A}
-	fi
-
-	cd "${S}"
-
+src_prepare() {
 	# patches go here...
 
 	# backport some patches
@@ -176,7 +168,7 @@
 	fi
 }
 
-src_compile() {
+src_configure() {
 	filter-flags -fprefetch-loop-arrays
 
 	econf \
@@ -189,8 +181,6 @@
 		--enable-logging \
 		$(use_with selinux) \
 		$(use_enable extras)
-
-	emake || die "compiling udev failed"
 }
 
 src_install() {
