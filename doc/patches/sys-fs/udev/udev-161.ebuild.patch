--- /usr/portage/sys-fs/udev/udev-161.ebuild	2010-08-24 20:41:29.000000000 +0200
+++ ./sys-fs/udev/udev-161.ebuild	2010-08-26 01:05:17.000000000 +0200
@@ -143,9 +143,9 @@
 			mv "${WORKDIR}"/test/sys "${S}"/test/
 		fi
 	fi
+}
 
-	cd "${S}"
-
+src_prepare() {
 	# patches go here...
 	epatch "${FILESDIR}/udev-161-cdrom_id_Drop_MEDIA_SESSION_NEXT_for_DVD-RW-RO.patch"
 
@@ -186,7 +186,7 @@
 	fi
 }
 
-src_compile() {
+src_configure() {
 	filter-flags -fprefetch-loop-arrays
 
 	econf \
@@ -202,8 +202,6 @@
 		$(use_enable extras) \
 		--disable-introspection
 	# we don't have gobject-introspection in portage tree
-
-	emake || die "compiling udev failed"
 }
 
 src_install() {
