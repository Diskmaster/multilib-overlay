#!/bin/bash

SOURCE_DIR=$1

if [[ ! -d ${SOURCE_DIR} ]]; then
	SOURCE_DIR=/usr/portage
fi

echo SOURCE_DIR=${SOURCE_DIR}

for EBUILD in $(find . -name "*.ebuild" -a -not -path "./main_tree*"); do
	if [[ ! -f ${SOURCE_DIR}/${EBUILD} ]]; then
		EBUILDS_NOT_IN_SOURCE="${EBUILDS_NOT_IN_SOURCE} ${EBUILD}"
	fi
done


EBUILDS_NOT_IN_SOURCE="$(tr ' ' '\n' <<< "${EBUILDS_NOT_IN_SOURCE}" | sort -u)"

echo the following ebuild are not in ${SOURCE_DIR}
echo -e "${EBUILDS_NOT_IN_SOURCE}"
